(function(m){var window=this;var wW=function(a){this.b=a.languageCode;this.g=a.languageName||null;this.j=a.languageOriginal||null;this.id=a.id||null;this.k=a.is_default||!1};
var xW=function(a){a=a||{};this.B=a.formats||"";this.A=a.format||1;if(1==this.A)for(var b=this.B.split(","),c=0;c<b.length;c++){var d=(0,window.parseInt)(b[c],10);(0,window.isNaN)(d)||(this.A=Math.max(d,this.A))}this.k=a.languageCode||"";this.C=a.languageName;this.g=a.kind||"";this.j=a.name;this.ra=a.id;this.F=a.is_default;this.b=null;a.translationLanguage&&(this.b=new wW(a.translationLanguage))};
var yW=function(a){var b=[a.C];if("asr"==a.g){var c=(0,m.hb)("YTP_ASR_SETTINGS_LABEL");b.push(" (",c,")")}a.j&&b.push(" - ",a.j);a.b&&b.push(" >> ",a.b.g);return b.join("")};var zW=function(){this.g=[];this.j=[]};var AW=function(a){this.b=a.hg;this.Ub=a.Ub||this.Ub};var BW=function(a){AW.call(this,a);this.af=a.text||this.af;this.Wh=a.windowId||this.Wh;this.vn=a.params.append||this.vn;this.xn=a.params.row||this.xn;this.wn=a.params.Gw||this.wn};
var CW=function(a){var b=a.firstChild&&a.firstChild.nodeValue||"",c=1E3*(0,window.parseFloat)(a.getAttribute("start")||0);a.getAttribute("t")&&(c=(0,window.parseInt)(a.getAttribute("t"),10));var d=1E3*(0,window.parseFloat)(a.getAttribute("dur")||0);a.getAttribute("d")&&(d=(0,window.parseFloat)(a.getAttribute("d")));var e=(0,window.parseInt)(a.getAttribute("w"),10)||0,b={hg:c,Ub:d,text:b,windowId:e,priority:5,params:{}};a.getAttribute("r")&&(b.params.row=(0,window.parseInt)(a.getAttribute("r"),10));
a.getAttribute("c")&&(b.params.Gw=(0,window.parseInt)(a.getAttribute("c"),10));a.getAttribute("append")&&(b.priority=6,b.params.append=!0);return new BW(b)};var DW=function(a){AW.call(this,a);this.id=a.windowId||this.id;this.params=a.params};var EW=function(){return new DW({hg:-2147483648,Ub:4294967295,params:FW})};var GW=function(a){zW.call(this);this.j.push(EW());a=a.firstChild.childNodes;for(var b=0,c=a.length;b<c;b++){var d=CW(a[b]);this.g.push(d)}};
var HW=function(a){zW.call(this);this.b={};a=a.firstChild.childNodes;for(var b=0,c=a.length;b<c;b++)switch(a[b].tagName){case "window":var d=a[b],e=(0,window.parseInt)(d.getAttribute("id"),10);t:{var f=this.b[e];if(d.getAttribute("t")||d.getAttribute("start")){var h=(0,window.parseInt)(d.getAttribute("t"),10);d.getAttribute("start")&&(h=1E3*(0,window.parseFloat)(d.getAttribute("start")));f&&(f.b+f.Ub>=h?f.Ub=h:f=null);switch(d.getAttribute("op")){case "kill":d=null;break t;case "define":f=null}f?
f.j=!0:f=EW();var k={},f=f?f.params:FW,p=void 0;for(p in f)k[p]=f[p];d.getAttribute("id")&&(k.id=d.getAttribute("id"));d.getAttribute("op")&&(k.zy=d.getAttribute("op"));d.getAttribute("rc")&&(k.yq=(0,window.parseInt)(d.getAttribute("rc"),10));d.getAttribute("cc")&&(k.wq=(0,window.parseInt)(d.getAttribute("cc"),10));d.getAttribute("ap")&&(f=(0,window.parseInt)(d.getAttribute("ap"),10),k.anchorPoint=0>f||8<f?7:f);d.getAttribute("ah")&&(k.xq=(0,window.parseInt)(d.getAttribute("ah"),10));d.getAttribute("av")&&
(k.zq=(0,window.parseInt)(d.getAttribute("av"),10));d.getAttribute("id")&&(k.id=(0,window.parseInt)(d.getAttribute("id"),10)||0);d.getAttribute("vs")&&(k.isVisible=Boolean(d.getAttribute("vs")));d.getAttribute("ju")&&(k.textAlign=IW[(0,window.parseInt)(d.getAttribute("ju"),10)]);d.getAttribute("pd")&&(k.sk=1,0==(0,window.parseInt)(d.getAttribute("pd"),10)&&(k.sk=0));d.getAttribute("bc")&&(k.backgroundColor=(0,window.parseInt)(d.getAttribute("bc"),16));d.getAttribute("bo")&&(k.opacity=(0,window.parseInt)(d.getAttribute("bo"),
10)/100);d.getAttribute("fc")&&(k.foregroundColor=(0,window.parseInt)(d.getAttribute("fc"),16));d.getAttribute("sd")&&(k.Ay=(0,window.parseInt)(d.getAttribute("sd"),10));f=(0,window.parseInt)(d.getAttribute("d"),10)||1E3*(0,window.parseFloat)(d.getAttribute("dur"))||2147483647;d={hg:h,Ub:f,params:k,windowId:(0,window.parseInt)(d.getAttribute("id"),10)};d=new DW(d)}else d=null}this.b[e]=d;this.j.push(d);break;case "text":e=CW(a[b]),this.g.push(e),d=e.Wh,this.b[d]&&(d=this.b[d],d.g+=e.af)}};
var JW=function(){zW.call(this)};var KW=function(a,b){zW.call(this);this.j.push(EW());for(var c=a.split(LW),d=1;d<c.length;d++){var e;e=c[d];var f=b;if(""==e||0==e.search(MW))e=null;else{var h=e.split(NW),k=0,p=h[k++].match(OW);p||(p=h[k++].match(OW));p?(e=PW(p[1],f),f=PW(p[3],f),h=h.slice(k).join("\n"),e=new BW({hg:e,Ub:f-e,text:h,windowId:0,priority:5,params:{}})):e=null}e&&this.g.push(e)}};
var PW=function(a,b){for(var c=a.split(":"),d=0,e=0;e<c.length;e++)d=60*d+(0,window.parseFloat)(c[e]);return 1E3*d+b};
var QW=function(a){this.b=[];if(a)if("WEBVTT"==a.substring(0,6))a=new KW(a,0);else{if("undefined"!=typeof window.DOMParser)a=(new window.DOMParser).parseFromString(a,"application/xml");else if("undefined"!=typeof window.ActiveXObject){var b=new window.ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);a=b}else throw Error("Your browser does not support loading xml documents");
a=a&&a.firstChild?"timedtext"==a.firstChild.tagName?3==(0,window.parseInt)(a.firstChild.getAttribute("format"),10)?new JW:new HW(a):new GW(a):null}else a=null;a&&(this.b=a.g)};var RW=function(){this.j=[];this.g=[];this.b=-1};var SW=function(a){return a.g.concat(a.j)};var TW=function(a,b){switch(b.g){case "asr":return UW(b,a.j);default:if(b.F||0>a.b)a.b=a.g.length;return UW(b,a.g)}};var UW=function(a,b){return(0,m.Ka)(b,(0,m.r)(a.equals,a))?!1:(b.push(a),!0)};
var VW=function(a){this.A=!!a;this.b=new RW;this.B=[]};var WW=function(a,b){return(0,m.Ka)(SW(a.b),function(a){return a.toString()==b})};var XW=function(a,b){var c=-1;SW(a.b).some(function(a,e){if(a.equals(b))return c=e,!0});return c};var YW=function(a,b,c,d){VW.call(this,d);c||(c=(0,m.ll)(a).hl||"",c=c.split("_").join("-"));this.j=(0,m.kl)(a,{hl:c});this.k=b;this.g={}};var ZW=function(a,b,c){a=$W(a,b);(0,m.T)(a,{format:"RAW",onSuccess:function(a){a=new QW(a.responseText);c(a,b)},withCredentials:!0})};
var aX=function(a,b){var c=a.j,d={type:"list",tlangs:1,v:a.k,fmts:Number(!1),vssids:1};a.A&&(d.asrs=1);c=(0,m.kl)(c,d);d=(0,m.r)(function(a){if((a=a.responseXML)&&a.firstChild){for(var c=this.b,d=a.getElementsByTagName("track"),k=d.length,p=0;p<k;p++){var u=d[p].getAttribute("formats"),z=d[p].getAttribute("lang_code"),M=d[p].getAttribute("lang_translated"),U=d[p].getAttribute("name"),ca=d[p].getAttribute("kind"),Fa=d[p].getAttribute("id"),Kb="true"==d[p].getAttribute("lang_default"),Tf="true"==d[p].getAttribute("cantran"),
Mq=d[p].getAttribute("vss_id"),u=new xW({formats:u,format:void 0,languageCode:z,languageName:M,name:U,kind:ca,id:Fa,is_servable:!0,is_default:Kb,is_translateable:Tf,vss_id:Mq});TW(c,u)}a=a.getElementsByTagName("target");c=a.length;for(d=0;d<c;d++)k=a[d].getAttribute("lang_code"),p=a[d].getAttribute("lang_translated"),u=a[d].getAttribute("lang_original"),z=a[d].getAttribute("id"),M="true"==a[d].getAttribute("lang_default"),k={languageCode:k,languageName:p,languageOriginal:u,id:z,is_default:M},this.g[k.languageCode]=
k.languageName,this.B.push(new wW(k))}b()},a);(0,m.T)(c,{format:"RAW",onSuccess:d,withCredentials:!0})};var $W=function(a,b){var c=a.j,d={v:a.k,type:"track",lang:b.k,name:b.j,kind:b.g,fmt:b.A};b.b&&(d.tlang=b.b.b);return c=(0,m.kl)(c,d)};var bX=function(){if((0,m.v)("TTS_URL")&&!cX){var a=(0,m.WH)();a&&(cX=new dX(a))}};
var dX=function(a){this.vg=!1;this.g=a;this.Ha=[];this.lf=[];this.mc=new YW((0,m.v)("TTS_URL"),(0,m.v)("VIDEO_ID"),null,!0);this.g.addEventListener("captionschanged",(0,m.r)(this.Fu,this))};var eX=function(a,b){var c=b.languageCode;b.languageName=a.mc.g[c]||c;b.translationLanguage&&(c=b.translationLanguage.languageCode,b.translationLanguage.languageName=a.mc.g[c]||c);c=new xW(b);return!c.k||c.b&&!c.b.b?null:c};
var fX=function(a,b,c){var d=(0,m.Nb)("button",{className:["yt-ui-menu-item yt-uix-menu-close-on-select yt-uix-button-menu-item"],value:c});c=(0,m.Nb)("span",{className:"yt-uix-button-content transcript-lang",value:c});b=window.document.createTextNode(String(b));a.b.appendChild(d);d.appendChild(c);c.appendChild(b)};
var gX=function(a,b){(0,m.cb)(a.ih);var c=Math.min(b.offsetTop-a.Ya.offsetTop,a.Ya.scrollHeight-a.Ya.offsetHeight),d=0;a.ih=(0,m.bb)((0,m.r)(function(){var a=c-this.Ya.scrollTop,b=Math.round(100*a/(1E3-50*d));Math.abs(a)<=Math.abs(b)||20<d?(this.Ya.scrollTop=c,(0,m.cb)(this.ih)):(this.Ya.scrollTop+=b,d++)},a),50)};wW.prototype.toString=function(){return this.b+"_"+this.g+"_"+this.j+"_"+this.id+"_"+this.k};xW.prototype.toString=function(){var a=[this.k,": ",this.j," (",this.g,")"];this.b&&a.push(" >> ",this.b.b);return a.join("")};xW.prototype.equals=function(a){if(!a)return!1;var b=this.b,c=a.b;if(b&&c){if(b.b!=c.b)return!1}else if(b||c)return!1;return this.k==a.k&&this.j==a.j&&this.g==a.g};var IW=["left","right","center"],FW={id:0,priority:0,anchorPoint:7,xq:50,TA:80,zq:95,yq:15,wq:100,isVisible:!0,textAlign:IW[2],sk:0,backgroundColor:"#080808",foregroundColor:"#fff",QA:1,SA:1};AW.prototype.b=0;AW.prototype.Ub=0;AW.prototype.toString=function(){return this.b+", "+this.Ub};(0,m.t)(BW,AW);m.g=BW.prototype;m.g.af="";m.g.vn=!1;m.g.xn=0;m.g.wn=0;m.g.Wh=0;m.g.toString=function(){return this.b+", "+this.Ub+": "+this.af};(0,m.t)(DW,AW);DW.prototype.id=0;DW.prototype.params=null;DW.prototype.g="";(0,m.t)(GW,zW);(0,m.t)(HW,zW);(0,m.t)(JW,zW);(0,m.t)(KW,zW);var MW=/NOTE/,LW=/[\r\n|\r|\n]{2,}/,NW=/\r\n|\r|\n/,OW=/(([\d]{2}:)?[\d]{2}:[\d]{2}\.[\d]{3})[\t ]+--\x3e[\t ]+(([\d]{2}:)?[\d]{2}:[\d]{2}\.[\d]{3})/;(0,m.t)(YW,VW);var cX=null;m.g=dX.prototype;m.g.Ha=null;m.g.mc=null;m.g.oi=null;m.g.Tl=null;m.g.ni=-1;m.g.mi=!1;m.g.Fi=0;m.g.ih=0;m.g.vg=!1;m.g.zd=null;m.g.Ya=null;m.g.Qg=null;m.g.lf=null;m.g.dispose=function(){(0,m.L)(this.Ha);this.Ha.length=0;this.lf.length=0;(0,m.cb)(this.Fi);(0,m.cb)(this.ih)};m.g.Fu=function(a){var b=eX(this,a);b&&(this.vg?(TW(this.mc.b,b)&&fX(this,yW(b),b.value),ZW(this.mc,b,(0,m.r)(this.Pg,this))):this.lf.push(a))};
m.g.open=function(a){if(this.vg)a();else if(this.Qg=(0,m.G)("watch-transcript-container"),"true"==(0,m.J)(this.Qg,"disabled"))a();else{var b=(0,m.Nb)("div",{className:"yt-uix-menu"}),c=(0,m.Nb)("div",{className:"yt-uix-menu-trigger"});this.zd=(0,m.Nb)("button",{className:["yt-uix-button yt-uix-button-default hidden"],"button-menu-id":"watch-transcript-track-selector"});this.b=(0,m.Nb)("div",{className:["yt-uix-menu-content yt-ui-menu-content yt-uix-menu-content-hidden"]});this.Qg.appendChild(b);b.appendChild(c);
c.appendChild(this.zd);b.appendChild(this.b);this.Ya=window.document.createElement("div");this.Ya.id="transcript-scrollbox";(0,m.D)(this.Ya,"yt-uix-scroller");this.Ha.push((0,m.K)(this.Ya,"mouseover",(0,m.r)(function(){this.mi=!0},this)));this.Ha.push((0,m.K)(this.Ya,"mouseout",(0,m.r)(function(){this.mi=!1},this)));this.Qg.appendChild(this.Ya);this.Ha.push((0,m.Q)(this.Ya,"click",(0,m.r)(this.tt,this),"caption-line"));aX(this.mc,(0,m.r)(function(){for(var b=this.mc,c=null,f=0;f<this.lf.length;f++)(c=
eX(this,this.lf[f]))&&TW(b.b,c);var h=SW(b.b);if(0>=h.length)(0,m.N)("watch-transcript-not-found");else{var f=(0,m.Nb)("span",{className:"yt-uix-button-content transcript-lang"}),k;k=yW(h[0]);k=window.document.createTextNode(String(k));this.zd.appendChild(f);f.appendChild(k);f=(0,m.Nb)("img",{src:(0,m.v)("DROPDOWN_ARROW_URL")});this.zd.appendChild(f);(0,m.N)(this.zd);f=0;for(k=h.length;f<k;f++)fX(this,yW(h[f]),h[f].toString());if(h=(0,m.hb)("CC_ADD_TRANSCRIPT_TITLE"))fX(this,h,"add-cc"),(0,m.gF)(6035988,
"cc_transcriptions"),(0,m.cF)();this.Ha.push((0,m.Q)(this.b,"click",(0,m.r)(this.st,this),"yt-uix-button-menu-item"));c?ZW(b,c,(0,m.r)(this.Pg,this)):(c=(0,m.r)(this.Pg,this),h=b.b.b,f=SW(b.b),0>h&&0<f.length&&(h=0),h=0>h?null:f[h],null!=h&&ZW(b,h,c))}a()},this));this.vg=!0}};
m.g.st=function(a){if("add-cc"==a.target.value){if(a=(0,m.v)("CC_ADD_TRANSCRIPT_URL"))window.location.href=a}else{var b=this.mc,c=(0,m.r)(this.Pg,this),d=WW(b,a.target.value);d&&ZW(b,d,c);this.b&&(this.zd.firstChild.innerHTML=a.target.innerHTML)}};m.g.tt=function(a){var b=(0,m.J)(a.currentTarget,"time");b&&(this.g.seekTo((0,window.parseInt)(b,10),!0),a.preventDefault())};
m.g.Pg=function(a,b){this.ni=-1;this.oi=a;this.Tl=b;var c=this.oi.b;(0,m.cb)(this.Fi);this.Ya.innerHTML="";for(var d=window.document.createDocumentFragment(),e=0,f=c.length;e<f;e++){var h=c[e],k=window.document.createElement("div"),p=h.b/1E3;k.id="cp-"+e;k.className="caption-line";(0,m.pl)(k,"time",p+"");d.appendChild(k);var u=window.document.createElement("div");u.className="caption-line-time";u.innerHTML=Math.floor(p/60)+":"+(10>p%60?"0":"")+Math.floor(p%60);k.appendChild(u);p=window.document.createElement("div");
p.className="caption-line-text";p.innerHTML=h.af;k.appendChild(p)}this.zd.selectedIndex=XW(this.mc,this.Tl);this.Ya.appendChild(d);this.Fi=(0,m.bb)((0,m.r)(this.Bt,this),500)};
m.g.Bt=function(){for(var a=this.g.getCurrentTime(),b=this.oi.b,c=this.ni,d=c;;){var e=0<=d?b[d].b/1E3:-1;if(a+.5<e)d-=1;else if(e=d+1<b.length?b[d+1].b/1E3:1E6,a+.5>e)d+=1;else break}d!=c&&(0<=c&&(a=(0,m.G)("cp-"+c),(0,m.E)(a,"caption-line-highlight")),0<=d&&(a=(0,m.G)("cp-"+d),(0,m.D)(a,"caption-line-highlight")),this.ni=d,this.mi||gX(this,(0,m.G)("cp-"+(3<=d?d-3:0))))};(0,m.l)("yt.www.watch.transcript.open",function(a){bX();cX.open(a)},void 0);(0,m.Pc)((0,m.ql)({name:"www/watch_transcript",deps:["www/watch"],page:"watch",init:function(){bX()},dispose:function(){cX&&(cX.dispose(),cX=null)}}));})(_yt_www);
